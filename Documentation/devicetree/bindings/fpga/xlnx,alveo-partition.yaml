# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/fpga/xlnx,alveo-partition.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Xilinx Alveo platform partition bindings

description: |
  Xilinx Alveo platform is PCI device and has one or more partitions. The
  partition is programmed dynamically and contains a set of hardware
  endpoints. This binding is defined for endpoint address translation.
  The endpoints are shown on the PCI BARs eventually and the following
  encoding is used for endpoint address:
    0xIooooooo 0xoooooooo
  Where:
    I = BAR index
    oooooo oooooooo = offset

  As a PCI device, the Alveo platform is enumerated at runtime. Thus,
  the partition node is created by Alveo device driver. The device driver
  gets the BAR base address from PCI device and create the 'range' property
  for address translation.

allOf:
  - $ref: /schemas/simple-bus.yaml#

maintainers:
  - Lizhi Hou <lizhi.hou@xilinx.com>

properties:
  compatible:
    contains:
      const: xlnx,alveo-partition

  "#address-cells":
    const: 2

  "#size-cells":
    const: 2

  ranges: true

patternProperties:
  "^.*@[0-9a-f]+$":
    description: hardware endpoints belong to this partition.
    type: object

required:
  - compatible
  - "#address-cells"
  - "#size-cells"
  - ranges

additionalProperties: false

examples:
  - |
    bus {
        #address-cells = <2>;
        #size-cells = <2>;
        xrt-part-bus@0 {
            compatible = "xlnx,alveo-partition", "simple-bus";
            #address-cells = <2>;
            #size-cells = <2>;
            ranges = <0x0 0x0 0x0 0xe0000000 0x0 0x2000000
                      0x20000000 0x0 0x0 0xe4200000 0x0 0x40000>;
            pr-isolate-ulp@41000 {
                compatible = "xlnx,alveo-pr-isolation";
                reg = <0x0 0x41000 0 0x1000>;
            };
        };
    };

